package P2S.UI.View.JDialog;

import P2S.Control.Bundle.*;
import P2S.Control.*;

import javax.swing.*;
import java.util.*;

/**
 * Boite de dialogue contenant les preferences du logiciel
 * @author Fabien Bouyssou
 */
public class JDialogPreferences extends javax.swing.JDialog {
    
    /**
     * Cree une nouvelle instance
     * @param parent Frame Parent
     * @param modal Modal
     */
    public JDialogPreferences(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        
        // initialise le texte
        initTexte();
        
        P2S.P2S.ControllerLocale.addLocaleListener(new LocaleListener(){
            public void localeChanged() {
                initTexte();
            } 
        });
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        java.awt.GridBagConstraints gridBagConstraints;

        LabelLangue = new javax.swing.JLabel();
        ComboBoxLangue = new javax.swing.JComboBox();
        LabelHost = new javax.swing.JLabel();
        TextFieldHost = new javax.swing.JTextField();
        ButtonCancel = new javax.swing.JButton();
        ButtonOK = new javax.swing.JButton();

        getContentPane().setLayout(new java.awt.GridBagLayout());

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        LabelLangue.setText("Langue");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(20, 20, 0, 0);
        getContentPane().add(LabelLangue, gridBagConstraints);

        ComboBoxLangue.setModel(new javax.swing.DefaultComboBoxModel(new String[] { Bundle.getText("JDialogPreferences_ComboBoxLangue_Francais"), Bundle.getText("JDialogPreferences_ComboBoxLangue_Anglais") }));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 4;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.ipadx = 56;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(20, 14, 0, 0);
        getContentPane().add(ComboBoxLangue, gridBagConstraints);

        LabelHost.setText("Host");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(11, 20, 0, 0);
        getContentPane().add(LabelHost, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 8;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.ipadx = 99;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(11, 14, 0, 43);
        getContentPane().add(TextFieldHost, gridBagConstraints);

        ButtonCancel.setText("Annuler");
        ButtonCancel.setMaximumSize(new java.awt.Dimension(100, 23));
        ButtonCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ButtonCancelActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 6;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 5;
        gridBagConstraints.ipadx = -1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(30, 10, 24, 43);
        getContentPane().add(ButtonCancel, gridBagConstraints);

        ButtonOK.setText("OK");
        ButtonOK.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ButtonOKActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.ipadx = 3;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(30, 8, 24, 0);
        getContentPane().add(ButtonOK, gridBagConstraints);

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width-231)/2, (screenSize.height-181)/2, 231, 181);
    }//GEN-END:initComponents

    private void ButtonCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ButtonCancelActionPerformed
        this.dispose();
    }//GEN-LAST:event_ButtonCancelActionPerformed

    private void ButtonOKActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ButtonOKActionPerformed
        // On regarde la langue choisie et on change la Locale
        if(this.ComboBoxLangue.getSelectedItem().toString().compareTo(Bundle.getText("JDialogPreferences_ComboBoxLangue_Francais")) == 0)
        {
            Bundle.setCurrentLocale(Locale.FRENCH);
            P2S.P2S.ControllerLocale.fireLocaleChanged(); // genere un evenement changement de langue
        }
        else if(this.ComboBoxLangue.getSelectedItem().toString().compareTo(Bundle.getText("JDialogPreferences_ComboBoxLangue_Anglais")) == 0)
        {
            Bundle.setCurrentLocale(Locale.ENGLISH);
            P2S.P2S.ControllerLocale.fireLocaleChanged(); // genere un evenement changement de langue
        }
        
        this.dispose();
    }//GEN-LAST:event_ButtonOKActionPerformed

    private void initTexte()
    {
        this.setTitle(Bundle.getText("JDialogPreferences_TitreFenetre"));
                
        LabelLangue.setText(Bundle.getText("JDialogPreferences_JLabel_Langue"));
        
        if(Locale.getDefault().toString().compareTo("fr") == 0)
            this.ComboBoxLangue.setSelectedItem(Bundle.getText("JDialogPreferences_ComboBoxLangue_Francais"));
        else if(Locale.getDefault().toString().compareTo("en") == 0)
            this.ComboBoxLangue.setSelectedItem(Bundle.getText("JDialogPreferences_ComboBoxLangue_Anglais"));
        
        this.LabelHost.setText(Bundle.getText("JDialogPreferences_JLabel_Host"));
        this.ButtonOK.setText(Bundle.getText("JDialogPreferences_JButton_Ok"));
        this.ButtonCancel.setText(Bundle.getText("JDialogPreferences_JButton_Annuler"));
    }
        
       
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton ButtonCancel;
    private javax.swing.JButton ButtonOK;
    private javax.swing.JComboBox ComboBoxLangue;
    private javax.swing.JLabel LabelHost;
    private javax.swing.JLabel LabelLangue;
    private javax.swing.JTextField TextFieldHost;
    // End of variables declaration//GEN-END:variables
    
}
